// Clears both regular cache and type cache
private void clearCaches() {
    hasNextPattern = null;
    typeCache = null;
}