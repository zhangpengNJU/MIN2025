/**
 * Gets traffic class or type-of-service in the IP datagram
 * header for packets sent from this DatagramSocket.
 * <p>
 * As the underlying network implementation may ignore the
 * traffic class or type-of-service set using {@link #setTrafficClass(int)}
 * this method may return a different value than was previously
 * set using the {@link #setTrafficClass(int)} method on this
 * DatagramSocket.
 *
 * @return the traffic class or type-of-service already set
 * @throws SocketException if there is an error obtaining the
 * traffic class or type-of-service value.
 * @since 1.4
 * @see #setTrafficClass(int)
 */
public synchronized int getTrafficClass() throws SocketException {
    if (isClosed())
        throw new SocketException("Socket is closed");
    return ((Integer) (getImpl().getOption(SocketOptions.IP_TOS))).intValue();
}