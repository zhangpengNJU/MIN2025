/**
 * Returns an array of abstract pathnames denoting the files and
 * directories in the directory denoted by this abstract pathname that
 * satisfy the specified filter.  The behavior of this method is the same
 * as that of the {@link #listFiles()} method, except that the pathnames in
 * the returned array must satisfy the filter.  If the given {@code filter}
 * is {@code null} then all pathnames are accepted.  Otherwise, a pathname
 * satisfies the filter if and only if the value {@code true} results when
 * the {@link FilenameFilter#accept
 * FilenameFilter.accept(File,&nbsp;String)} method of the filter is
 * invoked on this abstract pathname and the name of a file or directory in
 * the directory that it denotes.
 *
 * @param  filter
 *         A filename filter
 *
 * @return  An array of abstract pathnames denoting the files and
 *          directories in the directory denoted by this abstract pathname.
 *          The array will be empty if the directory is empty.  Returns
 *          {@code null} if this abstract pathname does not denote a
 *          directory, or if an I/O error occurs.
 *
 * @throws  SecurityException
 *          If a security manager exists and its {@link
 *          SecurityManager#checkRead(String)} method denies read access to
 *          the directory
 *
 * @since  1.2
 * @see java.nio.file.Files#newDirectoryStream(Path,String)
 */
public File[] listFiles(FilenameFilter filter) {
    String[] ss = normalizedList();
    if (ss == null)
        return null;
    ArrayList<File> files = new ArrayList<>();
    for (String s : ss) if ((filter == null) || filter.accept(this, s))
        files.add(new File(s, this));
    return files.toArray(new File[files.size()]);
}