/**
 * Closes this file output stream and releases any system resources
 * associated with this stream. This file output stream may no longer
 * be used for writing bytes.
 *
 * <p> If this stream has an associated channel then the channel is closed
 * as well.
 *
 * @exception  IOException  if an I/O error occurs.
 *
 * @revised 1.4
 * @spec JSR-51
 */
public void close() throws IOException {
    synchronized (closeLock) {
        if (closed) {
            return;
        }
        closed = true;
    }
    if (channel != null) {
        channel.close();
    }
    fd.closeAll(new Closeable() {

        public void close() throws IOException {
            close0();
        }
    });
}