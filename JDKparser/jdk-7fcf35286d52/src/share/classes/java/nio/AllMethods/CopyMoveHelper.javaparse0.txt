static CopyOptions parse(CopyOption... options) {
    CopyOptions result = new CopyOptions();
    for (CopyOption option : options) {
        if (option == StandardCopyOption.REPLACE_EXISTING) {
            result.replaceExisting = true;
            continue;
        }
        if (option == LinkOption.NOFOLLOW_LINKS) {
            result.followLinks = false;
            continue;
        }
        if (option == StandardCopyOption.COPY_ATTRIBUTES) {
            result.copyAttributes = true;
            continue;
        }
        if (option == null)
            throw new NullPointerException();
        throw new UnsupportedOperationException("'" + option + "' is not a recognized copy option");
    }
    return result;
}